<div class="progress-container">
  <div class="header">
    <div class="header-content">
      <h1>Application Progress</h1>
      <button class="logout-btn" (click)="logout()">Logout</button>
    </div>
  </div>

  <div class="main-content">
    <div class="progress-card">
      <h2>Your Application Journey</h2>
      
      <div class="progress-wrapper">
        <div class="progress-bar-container">
          <div class="progress-bar" [style.width.%]="getProgressPercentage()"></div>
        </div>

        <div class="steps-container">
          <div *ngFor="let step of steps" class="step" [class.completed]="isStepCompleted(step.key)">
            <div class="step-number" [class.active]="applicationStatus?.status === step.key">
              {{ step.id }}
            </div>
            <div class="step-label">{{ step.label }}</div>
          </div>
        </div>
      </div>

        <div class="status-info">
          <div class="info-card">
            <h3>Current Status</h3>
            <p class="status-badge">{{ (applicationStatus?.status || 'pending') | titlecase | replace: '_': ' ' }}</p>
            <p class="info-text">
              We are reviewing your profile and will forward your resume to top companies matching your
              profile. This usually takes 24-48 hours.
            </p>
          </div>

        <div class="timeline">
          <div class="timeline-item" [class.active]="isStepCompleted('pending')">
            <div class="timeline-marker">âœ“</div>
            <div class="timeline-content">
              <h4>Application Received</h4>
              <p>Your application has been successfully submitted and is under review.</p>
            </div>
          </div>

          <div class="timeline-item" [class.active]="isStepCompleted('resume_received')">
            <div class="timeline-marker">{{ isStepCompleted('resume_received') ? 'âœ“' : '' }}</div>
            <div class="timeline-content">
              <h4>Resume Received</h4>
              <p>Your resume has been received and is being verified by our team.</p>
            </div>
          </div>

          <div class="timeline-item" [class.active]="isStepCompleted('forwarded_to_hr')">
            <div class="timeline-marker">{{ isStepCompleted('forwarded_to_hr') ? 'âœ“' : '' }}</div>
            <div class="timeline-content">
              <h4>Forwarded to HR</h4>
              <p>Your profile has been forwarded to relevant companies and HR departments.</p>
            </div>
          </div>

          <div class="timeline-item" [class.active]="isStepCompleted('interview_scheduled')">
            <div class="timeline-marker">{{ isStepCompleted('interview_scheduled') ? 'âœ“' : '' }}</div>
            <div class="timeline-content">
              <h4>Interview Scheduled</h4>
              <p>Congratulations! Your interview has been scheduled. Check your email for details.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="referral-card">
      <h2>Refer & Earn</h2>
      
      <div class="referral-content">
        <p class="referral-description">
          Share your unique referral link with friends and earn rewards when they join our platform!
        </p>

        <div class="referral-link-box">
          <input
            type="text"
            class="referral-input"
            [value]="referralLink"
            readonly
          />
          <button class="copy-btn" (click)="copyToClipboard()" [class.copied]="referralCopied">
            {{ referralCopied ? 'âœ“ Copied!' : 'Copy Link' }}
          </button>
        </div>

        <div class="share-buttons">
          <button class="share-btn whatsapp" (click)="shareOnWhatsApp()">
            <span>ðŸ“±</span> WhatsApp
          </button>
          <button class="share-btn email" (click)="shareOnEmail()">
            <span>ðŸ“§</span> Email
          </button>
        </div>

        <div class="benefits-list">
          <h4>Benefits of Referral:</h4>
          <ul>
            <li>Earn â‚¹100 per successful referral</li>
            <li>Unlimited earning potential</li>
            <li>Both you and your friend get bonus features</li>
            <li>Rewards credited instantly</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Referral Modal -->
<div class="modal-backdrop" *ngIf="showReferralModal" (click)="closeReferralModal()"></div>
<div class="referral-modal" *ngIf="showReferralModal">
  <div class="modal-header">
    <h3>Share Your Referral Link</h3>
    <button class="close-btn" (click)="closeReferralModal()">âœ•</button>
  </div>
  <div class="modal-body">
    <div class="referral-link-display">
      <input
        type="text"
        class="referral-input-large"
        [value]="referralLink"
        readonly
      />
      <button class="copy-btn-large" (click)="copyToClipboard()">
        {{ referralCopied ? 'âœ“ Copied!' : 'Copy' }}
      </button>
    </div>
  </div>
</div>
